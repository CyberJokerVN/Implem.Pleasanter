try
{
    var response = Repository.ExecuteScalar_response(
        context: context,
        transactional: true,
        statements: statements.ToArray());
    if (response.Event == "Conflicted")
    {
        return new ErrorData(
            type: Error.Types.UpdateConflicts,
            id: UserId);
    }
}
catch (System.Data.SqlClient.SqlException e)
{
    if (e.Number == 2601)
    {
        return new ErrorData(type: Error.Types.LoginIdAlreadyUse);
    }
    else
    {
        throw;
    }
}